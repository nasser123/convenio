<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="7374f43b-7dd2-4834-86bc-b8fbcc99f03c">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CLIENTE" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PERIODO" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PERIODOFINAL" class="java.util.Date"/>
	<parameter name="EMPRESA" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT
     cliente.`nome` AS cliente_nome,
     convenio.`nome` AS convenio_nome,
     venda.`notafiscal` AS venda_notafiscal,
     venda.`valor` AS venda_valor,
     venda.`data` AS venda_data,
     parcela.`nrparcela` AS parcela_nrparcela,
     parcela.`vencimento` AS parcela_vencimento,
     parcela.`valorparcela` AS parcela_valorparcela,
     parcela.`pago` AS parcela_pago,
     convenio.`responsavel` AS convenio_responsavel,
     convenio.`telefone` AS convenio_telefone,
     venda.`nrparcelas` AS venda_nrparcelas,
     Empresa.`idEmpresa` AS Empresa_idEmpresa,
     Empresa.`razaosocial` AS Empresa_razaosocial,
     Empresa.`fantasia` AS Empresa_fantasia,
     Empresa.`cnpj` AS Empresa_cnpj,
     Empresa.`endereco` AS Empresa_endereco,
     Empresa.`telefone` AS Empresa_telefone,
     Empresa.`cidade` AS Empresa_cidade,
     parcela.`datapgto` AS parcela_datapgto,
     convenio.`comissao` AS convenio_comissao
FROM
     `parcela` parcela INNER JOIN `venda` venda ON parcela.`idvenda` = venda.`idvenda`
     INNER JOIN `cliente` cliente ON venda.`idcliente` = cliente.`idcliente`
     INNER JOIN `convenio` convenio ON cliente.`idconvenio` = convenio.`idconvenio`,
     `Empresa` Empresa
WHERE
     parcela.`vencimento` >= $P{PERIODO}
     and parcela.`vencimento` <= $P{PERIODOFINAL}
 AND cliente.`idcliente` = $P{CLIENTE}
     and Empresa.`idEmpresa` = $P{EMPRESA}
ORDER BY
     cliente.`nome` ASC,
     parcela.`vencimento` ASC,
     parcela.`idparcela` ASC]]>
	</queryString>
	<field name="cliente_nome" class="java.lang.String"/>
	<field name="convenio_nome" class="java.lang.String"/>
	<field name="venda_notafiscal" class="java.lang.Integer"/>
	<field name="venda_valor" class="java.lang.Float"/>
	<field name="venda_data" class="java.sql.Date"/>
	<field name="parcela_nrparcela" class="java.lang.Integer"/>
	<field name="parcela_vencimento" class="java.sql.Date"/>
	<field name="parcela_valorparcela" class="java.lang.Float"/>
	<field name="parcela_pago" class="java.lang.Boolean"/>
	<field name="convenio_responsavel" class="java.lang.String"/>
	<field name="convenio_telefone" class="java.lang.String"/>
	<field name="venda_nrparcelas" class="java.lang.Integer"/>
	<field name="Empresa_idEmpresa" class="java.lang.Integer"/>
	<field name="Empresa_razaosocial" class="java.lang.String"/>
	<field name="Empresa_fantasia" class="java.lang.String"/>
	<field name="Empresa_cnpj" class="java.lang.String"/>
	<field name="Empresa_endereco" class="java.lang.String"/>
	<field name="Empresa_telefone" class="java.lang.String"/>
	<field name="Empresa_cidade" class="java.lang.String"/>
	<field name="parcela_datapgto" class="java.sql.Date"/>
	<field name="convenio_comissao" class="java.lang.Double"/>
	<variable name="TotalPrestacoes" class="java.lang.String"/>
	<variable name="parcela_valorparcela_1" class="java.lang.Double" resetType="Group" resetGroup="Cliente_group" calculation="Sum">
		<variableExpression><![CDATA[$F{parcela_valorparcela}]]></variableExpression>
	</variable>
	<variable name="parcela_valorparcela_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{parcela_valorparcela}]]></variableExpression>
	</variable>
	<variable name="saldoParcial" class="java.lang.Double" resetType="Group" resetGroup="Cliente_group">
		<variableExpression><![CDATA[$F{parcela_pago} ? 0.0 : $F{parcela_valorparcela}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="saldoCliente" class="java.lang.Double" resetType="Group" resetGroup="Cliente_group" calculation="Sum">
		<variableExpression><![CDATA[$V{saldoParcial}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="saldoFinal" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$V{saldoParcial}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="valorDesconto" class="java.lang.Double">
		<variableExpression><![CDATA[new Double(($F{convenio_comissao}.doubleValue()* 0.01) * ($V{parcela_valorparcela_2}.doubleValue() - $V{saldoFinal}.doubleValue()))]]></variableExpression>
	</variable>
	<variable name="saldoBaixado" class="java.lang.Double">
		<variableExpression><![CDATA[new Double($V{parcela_valorparcela_2} - $V{saldoFinal})]]></variableExpression>
	</variable>
	<variable name="saldoAPagar" class="java.lang.Double">
		<variableExpression><![CDATA[new Double($V{saldoBaixado} - $V{valorDesconto})]]></variableExpression>
	</variable>
	<group name="Cliente_group">
		<groupExpression><![CDATA[$F{cliente_nome}]]></groupExpression>
		<groupHeader>
			<band height="42">
				<textField>
					<reportElement x="0" y="7" width="303" height="20" uuid="d7bd6dc6-0a8b-4404-a105-6343f2b9b4d3"/>
					<textElement>
						<font size="12" isBold="true" isItalic="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{cliente_nome}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="1" y="26" width="68" height="15" uuid="36e0b034-e27a-42b9-98fb-800b07bc2bf5"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Dt da Venda]]></text>
				</staticText>
				<staticText>
					<reportElement x="279" y="27" width="60" height="15" uuid="f7d8f200-6f14-4187-817c-751c63e66911"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Venc]]></text>
				</staticText>
				<staticText>
					<reportElement x="341" y="26" width="77" height="15" uuid="0f00ecab-3f3f-479e-aae1-6be20c68f56b"/>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Valor]]></text>
				</staticText>
				<staticText>
					<reportElement x="111" y="27" width="70" height="15" uuid="afcde4c0-da02-4f74-85f8-a7b9624bb046"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Total]]></text>
				</staticText>
				<staticText>
					<reportElement x="181" y="27" width="50" height="15" uuid="e71a1025-7837-41d9-8931-d1020fae8b22"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Qtd Parc.]]></text>
				</staticText>
				<staticText>
					<reportElement x="235" y="27" width="42" height="15" uuid="04e4ff6f-ba15-41fe-a034-490492f3df1a"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Parcela]]></text>
				</staticText>
				<line>
					<reportElement x="2" y="3" width="554" height="1" uuid="70b40cb7-810c-4958-8351-6560e49689e0"/>
				</line>
				<staticText>
					<reportElement x="424" y="26" width="56" height="15" uuid="88183cd3-bae2-4fee-82e6-06fc255f727a"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Situação]]></text>
				</staticText>
				<staticText>
					<reportElement x="71" y="27" width="40" height="14" uuid="cec2e2c7-58f8-4429-9f01-ad78c6c13d2c"/>
					<text><![CDATA[NF]]></text>
				</staticText>
				<staticText>
					<reportElement x="498" y="26" width="57" height="15" uuid="c6519dc1-9185-42c8-a1b5-2931fe3537ea"/>
					<textElement textAlignment="Right"/>
					<text><![CDATA[Data Pgto]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="32">
				<staticText>
					<reportElement x="2" y="0" width="100" height="20" uuid="bf1278ec-3958-4e82-aa1a-1a14b6589056"/>
					<textElement textAlignment="Right">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Total do Cliente:]]></text>
				</staticText>
				<line>
					<reportElement x="1" y="20" width="554" height="1" uuid="a3ad805f-d30d-4c04-91cd-e0ec6fcef433"/>
				</line>
				<textField pattern="###0.00">
					<reportElement x="104" y="0" width="91" height="20" uuid="b8c4d11e-6639-42ee-b8ff-fc41cda526fb"/>
					<textElement textAlignment="Right">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{parcela_valorparcela_1}]]></textFieldExpression>
				</textField>
				<textField pattern="###0.00">
					<reportElement x="495" y="0" width="53" height="19" uuid="49856a96-ff0e-4535-b6b3-7a796802abca"/>
					<textElement>
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{saldoCliente}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="373" y="0" width="68" height="18" uuid="4977b316-5c16-4738-9339-b65897f84f02"/>
					<textElement textAlignment="Right">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Saldo:]]></text>
				</staticText>
				<staticText>
					<reportElement x="204" y="1" width="49" height="20" uuid="f8b0b6c3-e285-46aa-b3fe-bb33d20ebd48"/>
					<textElement textAlignment="Right">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Pago:]]></text>
				</staticText>
				<textField pattern="###0.00">
					<reportElement x="273" y="0" width="100" height="20" uuid="77eb85ba-6b69-4e11-952f-2d1770ea5193"/>
					<textElement>
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{parcela_valorparcela_1} - $V{saldoCliente}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="112" splitType="Stretch">
			<staticText>
				<reportElement x="121" y="78" width="324" height="20" uuid="8548cd08-7377-4b99-9aba-ba96b8e9313c"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[RELATÓRIO DE PARCELAS]]></text>
			</staticText>
			<staticText>
				<reportElement x="121" y="18" width="319" height="18" uuid="271588e9-7fbd-4f12-b500-687d527744da"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="false" isItalic="true" isStrikeThrough="false"/>
				</textElement>
				<text><![CDATA[Servindo sua família pelo melhor preço]]></text>
			</staticText>
			<textField>
				<reportElement x="122" y="-2" width="318" height="20" uuid="4319abfa-df8b-4655-8b48-3a19c8291b4c"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Empresa_fantasia}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="122" y="58" width="318" height="20" uuid="8e4923c2-ce00-4c02-8a2f-eca64facf3a1"/>
				<textElement textAlignment="Center">
					<font isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Empresa_cidade}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="122" y="36" width="188" height="20" uuid="29367bd1-e9eb-4a11-a86e-a83f207b17fe"/>
				<textElement>
					<font isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Empresa_endereco}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="333" y="36" width="107" height="20" uuid="80c517dd-6571-4e76-a3ea-82889b83eaf0"/>
				<textElement textAlignment="Right">
					<font isBold="true" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Empresa_telefone}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="17">
			<textField pattern="dd/MM/yyyy">
				<reportElement x="1" y="0" width="70" height="15" uuid="d118ec83-7057-471d-8a35-2cb727a40c65"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{venda_data}]]></textFieldExpression>
			</textField>
			<textField pattern="R$ ##0.00">
				<reportElement x="111" y="0" width="70" height="15" uuid="ba880368-2ac7-4864-87e3-515da6516b01"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{venda_valor}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="278" y="0" width="60" height="15" uuid="ac9c1111-c1ea-4dad-ac83-a9bcfc66ee2b"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{parcela_vencimento}]]></textFieldExpression>
			</textField>
			<textField pattern="R$ ##0.00">
				<reportElement x="339" y="0" width="77" height="15" uuid="141b554e-ef7b-4be0-b88f-90865b84c62d"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{parcela_valorparcela}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="192" y="0" width="39" height="15" uuid="6905d73f-9c97-485e-a10b-df98e50c97a6"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{venda_nrparcelas}]]></textFieldExpression>
			</textField>
			<textField pattern="#ª">
				<reportElement x="239" y="0" width="34" height="15" uuid="acb82359-3c94-4c19-91bd-41df59ea2058"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{parcela_nrparcela}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="426" y="2" width="35" height="15" uuid="287ff49b-380e-4cbc-8561-21abdc5114d1"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{parcela_pago} ? "PG" : "NPG"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="71" y="0" width="40" height="15" uuid="8da3fd98-2c59-437c-8efa-393648e4ef57"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{venda_notafiscal}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="500" y="0" width="53" height="15" uuid="0182c228-95ea-49d3-a0b1-1279893274a6"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{parcela_datapgto}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="467" y="1" width="28" height="14" forecolor="#FFFFFF" uuid="31c31964-c416-4721-863d-cbd287a6ea33"/>
				<textFieldExpression><![CDATA[$V{saldoParcial}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="30" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="20" uuid="47dcdb08-026d-43fb-8098-eb5690041e32"/>
			</rectangle>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="0" width="221" height="20" uuid="676cea4e-777b-456d-8c32-5b1edd20a7aa"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="292" y="0" width="223" height="20" uuid="d25f1063-acea-4738-9672-2639139febd8"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="515" y="0" width="40" height="20" uuid="44a86fff-110b-46aa-8994-9adce3616b82"/>
				<textFieldExpression><![CDATA["  " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="233">
			<textField evaluationTime="Report" pattern="R$ ##0.00">
				<reportElement x="320" y="5" width="100" height="20" uuid="19debf56-fa6e-4a4f-a1d7-65d6a5320eed"/>
				<textElement textAlignment="Right">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{parcela_valorparcela_2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="153" y="5" width="150" height="20" uuid="f887d920-bf5f-4044-81bb-54e9b5627f4e"/>
				<textElement textAlignment="Right">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Total do Convênio:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="129" width="331" height="20" uuid="65be7158-b8aa-4041-8780-5acdf1215c0c"/>
				<text><![CDATA[Obs. Após a data de vencimento haverá acréscimo de 5%]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="160" width="478" height="20" uuid="908fae97-e1e0-4109-890a-02875687c26f"/>
				<text><![CDATA[Ass.;____________________________________________  Recebi em:  ____/______/_______]]></text>
			</staticText>
			<staticText>
				<reportElement x="153" y="25" width="150" height="20" uuid="f140cc50-7047-4b9b-8749-dacbcc972763"/>
				<textElement textAlignment="Right">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Pago:]]></text>
			</staticText>
			<textField pattern="R$ ##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="320" y="45" width="101" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="2e496786-4dba-4f32-83cb-da38169dbc38"/>
				<textElement textAlignment="Right" verticalAlignment="Top" rotation="None" markup="none">
					<font fontName="SansSerif" size="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{saldoFinal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="153" y="45" width="150" height="20" uuid="d6988cdb-668e-45e8-88d4-e5471913317b"/>
				<textElement textAlignment="Right">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo Devedor:]]></text>
			</staticText>
			<textField pattern="R$ ##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="321" y="25" width="100" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="6cc09b68-4af3-4d00-89dd-df3dc1ff5234"/>
				<textElement textAlignment="Right" verticalAlignment="Top" rotation="None" markup="none">
					<font fontName="SansSerif" size="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{saldoBaixado}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="495" y="215" width="40" height="16" uuid="292a9acf-f666-4fb4-8b56-7686c1c9125e"/>
				<textFieldExpression><![CDATA["  " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="215" width="153" height="16" uuid="66bd4877-48e2-45ab-ac4e-e6d610fde51d"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="153" y="215" width="100" height="16" uuid="8adf8a42-95d2-4739-8458-9923f4972d0a"/>
				<textElement>
					<font isItalic="true"/>
				</textElement>
				<text><![CDATA[Totaltech Sistemas]]></text>
			</staticText>
			<textField>
				<reportElement x="257" y="215" width="223" height="16" uuid="dc58cf3b-f066-469c-8a4a-81153ca6d943"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
